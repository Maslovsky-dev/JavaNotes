---
tags: Java/Многопоточность
--- 
В Stream API есть простой способ распараллеливания потока методом **parallel()** или **parallelStream()**, чтобы получить выигрыш в производительности на многоядерных машинах.

По умолчанию parallel stream используют `ForkJoinPool.commonPool`. Этот пул создается статически и живет пока не будет вызван `System::exit`. Если задачам не указывать конкретный пул, то они будут исполняться в рамках **commonPool**.

>[!NOTE] По умолчанию, размер пула равен на 1 меньше, чем количество доступных ядер.

Когда некий тред отправляет задачу в common pool, то пул может использовать вызывающий тред (caller-thread) в качестве исполнителя. ForkJoinPool пытается загрузить своими задачами и вызывающий тред.
## Сортировка слиянием на FJP (ForkJoinPool)
![[ForkJoinPool.png]]
