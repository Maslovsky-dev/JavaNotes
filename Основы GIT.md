---
tags: Git 
---
[Learn Git Branching](https://learngitbranching.js.org/?locale=ru_RU)
Репозиторий набор папок, содержащих код, нужные файлы, библиотеки и прочее
## Коммит
Это снимок всех файлов в директории. Похоже на копию, только лучше.
Отличие от копии в том, что git не слепо копирует всю директорию каждый раз, а ужимает коммит в набор изменений или "дельту" между текущей версией и предыдущей

Git хранит всю историю изменений. Поэтому коммиты имеют предков
## Ветвление
Ветки - ссылки на определенный коммит.  Рекомендуется разбивать работу на много маленьких веток, вместо хранения всех изменений в одной большой ветке.

Ветка хранит изменения текущего коммита и всех его родителей.

Создать новую ветку 
``` git
git branch newImage
```


Но мало создать ветку, надо еще переключиться на нее
``` git
git checkout [name]
git checkout newImage; git commit // 2 команды
git checkout -b [yourbranchname]  // 1 команда
```

## Слияние 
Слияния в Git создают особый вид коммита, который имеет сразу двух родителей. 
Команда
``` git
git merge bugFix
```
После слияния ветка main указывает на коммит, у которого 2 родителя. В ветке main теперь содержатся все изменения репозитория
Merge веток
``` git
git checkout bugFix; git merge main
```

## Навигация
### HEAD
Символическое имя текущего выбранного коммита - тот коммит, над которым мы сейчас работаем
Обычно head указывает на имя ветки (например, bugFix). Когда вы делаете коммит, статус ветки меняется и это изменение видно через head.

Можно отделить название коммита от названия ветки с помощью
``` git
git checkout [hashName of commit]
```
Хэш имя можно сокращать. Например
fed2da64c0efc5293610bdd892f82a58e8cbc5d8 -> fed2
### Относительные ссылки
-   Перемещение на один коммит назад `^`
-   Перемещение на несколько коммитов назад `~<num>`
Пример
``` git
git checkout bugFix^ //Перемещение относительно ветки на 1 вверх
git checkout С4; git checkout HEAD^; //Перемещение относительно коммита на 1 вверх
```
### Оператор "~"
Позволяет переходит на заданное кол-во коммитов назад по дереву

## Rebase Перемещение ветки или коммита
### Коммит Rebase 
Перенести коммит в текущую ветку можно командой rebase 
``` git
git rebase main
```
При этом создается копия коммита и переносится в нужно место.
Далее нужно обновить ветку, чтобы сохранились все изменения
![[git rebase.png|300]]
``` git
git rebase bugFix
```
![[git rebase 2.png|300]]
### Ветка branch forcing
`git branch -f main HEAD~3`

Переместит (принудительно) ветку `main` на три родителя назад от `HEAD`.
![[branch force.png|300]]
![[branch force 2.png|300]]
## Отмена изменений
Локальные изменения
`git reset HEAD^1`
Чтобы изменения изменились у всех участников, нужно применить команду revert 
`git revert HEAD`
![[git revert.png|300]]
![[git revert 2.png|300]]
Gоявился новый коммит. Дело в том, что новый коммит `C2'` просто содержит изменения, полностью противоположные тем, что сделаны в коммите `C2`.

После `revert` можно сделать `push` и поделиться изменениями с остальными.
