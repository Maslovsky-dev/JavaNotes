---
tags: Java/Многопоточность
---
Deadlock – это взаимная блокировка, ситуация, когда два или более потока «наступают друг-другу на хвост» – зависают в вечном ожидании ресурсов, захваченных друг другом.

Deadlock – это ситуация в многопоточном программировании, когда два или более потока залочены навсегда, ожидают друг друга и ничего не делают.
[Собеседование Java](https://youtu.be/THdyhz0LAKQ?t=1346)
![[Deadlock-1.png]]

1 поток захватывает 1 ресурс, 2 поток захватывает 2 ресурс. Поток № 2, не высвобождая ресурс 1, хочет получить доступ к ресурсу 2. То же происходит с потоком №1. Потоки блокируются.
## Как избежать deadlock?
Чтобы избежать deadlock в Java, можно применять следующие подходы:

1. **Избегайте взаимной блокировки**: Один из способов избежать deadlock - это избегать ситуаций, когда потоки конкурируют за доступ к общим ресурсам. Например, можно использовать неблокирующие алгоритмы, атомарные операции или синхронизацию на более мелком уровне.

2. **Используйте стратегию фиксированного порядка захвата ресурсов**: Если вам все же необходимо работать с блокирующими ресурсами, старайтесь захватывать и освобождать ресурсы в фиксированном порядке. Это позволит избежать циклической зависимости и снизит вероятность deadlock.

3. **Используйте таймауты**: При блокировке ресурсов можно использовать таймауты, чтобы избежать бесконечного ожидания освобождения ресурсов. Если ресурс не освобождается в течение определенного времени, можно принять соответствующие меры, например, выбросить исключение или освободить другие ресурсы.

4. **Используйте стратегии обнаружения и устранения deadlock**: Существуют алгоритмы обнаружения deadlock, которые позволяют выявить и локализовать проблемные места в программе. Это может помочь в устранении причин deadlock и повышении стабильности работы программы.

5. **Тщательно планируйте использование ресурсов**: Внимательно проектируйте использование ресурсов в вашей программе, чтобы избежать ситуаций, когда потоки долго удерживают ресурсы без необходимости. Минимизируйте время блокировки ресурсов и стремитесь к эффективному использованию ресурсов.
