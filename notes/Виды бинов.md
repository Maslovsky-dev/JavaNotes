---
tags: Spring
---
В Spring Framework во всех определениях бизнес-сущностей (bean) явно или неявно присутствует атрибут scope. В Java-конфигурации он передается в аннотации `@Scope`, в xml – в атрибуте `scope` тега `<bean>`.

Атрибут scope – это строка-идентификатор, которая ставит бину в соответствие экземпляр класса `org.springframework.beans.factory.config.Scope`. Скоуп – реализация паттерна «стратегия» для фабрик бинов, инструкция по созданию бизнес-объектов.

## Распространенные scope
В простейшем Spring-приложении всегда существует два скоупа:
- _singleton_ – объект создается однажды, при последующих [внедрениях](https://itsobes.ru/JavaSobes/kak-spring-framework-realizuet-pattern-dependency-injection) переиспользуется. Полезен для большинства случаев: различные сервисы, объекты без состояния, [неизменяемые](https://itsobes.ru/JavaSobes/kak-napisat-immutabelnyi-klass) объекты. Стоит заметить, это не класс-синглтон: при [объявлении двух бинов одного класса](https://www.baeldung.com/spring-same-class-multiple-beans) их экземпляров будет два. **Это скоуп по умолчанию**.
- _prototype_ – при каждом внедрении фабрика бинов создает новый объект. Нужен для изменяемых бинов с состоянием.

## Все scope
1. **Singleton (одиночка):** Это вид бина по умолчанию. Объект одного бина создается только один раз и переиспользуется при каждом запросе этого бина. Если вы объявляете несколько бинов одного класса, каждый бин будет иметь свой отдельный экземпляр этого класса.

2. **Prototype (прототип):** В отличие от Singleton, каждый раз, когда запрашивается прототипный бин, контейнер создает новый экземпляр этого бина. Прототипные бины полезны, когда требуется новый объект каждый раз, например, для объектов с изменяемым состоянием или бинов, которые представляют сеанс пользователя.

3. **Request (запрос):** Этот вид бина создается один раз для каждого HTTP-запроса веб-приложения. Бин с областью действия запроса полезен для объектов, которые должны быть уникальными для каждого запроса, например, данные, относящиеся к текущему запросу.

4. **Session (сеанс):** При каждой новой сессии пользователя создается один экземпляр бина с областью действия сеанса. Бин с областью действия сеанса полезен для объектов, которые должны быть уникальными для каждой сессии пользователя, например, данные пользователя, сохраняемые в сессии.

5. **Global Session (глобальная сессия):** Этот вид бина используется в контексте портлетов. Бин с областью действия глобальной сессии создается один раз для каждой глобальной сессии портлета.

6. **Application (приложение):** Этот вид бина создается один раз при запуске приложения и существует в течение всего времени жизни приложения. Бин с областью действия приложения полезен для объектов, которые должны быть доступными во всем приложении, например, глобальные настройки или ресурсы.
## Отличие Application от Singleton
Контексты могут наследоваться друг от друга
Singleton - только в одном контексте, Aplication - во всех контекстах

## Отличие бина от POJO-класса
- поля бина должны быть приватными, у полей должны быть геттеры/сеттеры, должен быть публичный конструктор без аргументов, является сериализуемым классом, не является динамическим Proxy-объектом.
