---
tags: SQL
---
![[Lost Update-1.png]]
Обе транзакции одновременно прочитали значение из поля value и занесли в переменную @value.
Увеличили value на 1 и обновили таблицу. В таблице value = 4, хотя должно было быть 5.

## Решение
### Атомарные update
![[Атомарные апдейты-1.png]]
В одном запросе читаем и записываем данные.

### Explicit lock
То же самое, что и атомарный апдейт, только в ручную.
![[Expicit lock-1.png]] Сначала устанавливаем эксклюзивную блокировку, потом обновляем.

### Автоматическая детектирование потерянных апдейтов
![[Lost Update-3.png]]
