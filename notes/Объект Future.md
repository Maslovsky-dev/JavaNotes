---
tags: Java/Многопоточность
---
Объект `Future` в Java представляет **результат** асинхронной операции. Он предоставляет возможность проверить состояние операции и получить результат, когда он станет доступным. `Future` позволяет выполнять параллельные и асинхронные операции и получать результаты в дальнейшем.

>[!tip] Future сам по себе не может запустить задачу.
>Он используется для ожидания и получения результата, который может быть готов в будущем.

Основные методы и функциональность объекта `Future`:

1. **`get()`:** Метод `get()` используется для получения результата операции. Он блокирует вызывающий поток, пока результат не станет доступным. Если результат еще не готов, вызывающий поток ожидает его завершения. Метод `get()` может выбросить исключение `InterruptedException` в случае, если текущий поток был прерван во время ожидания.
2. **`get(long timeout, TimeUnit unit)`:** Этот перегруженный метод `get()` позволяет указать максимальное время ожидания результата. Если результат не будет доступен в указанный период времени, будет выброшено исключение `TimeoutException`.
3. **`cancel(boolean mayInterruptIfRunning)`:** Метод `cancel()` используется для отмены операции, связанной с `Future`. Он пытается отменить операцию и возвращает `true`, если операция успешно отменена. Если операция уже завершена или отменена ранее, метод вернет `false`. Аргумент `mayInterruptIfRunning` определяет, может ли поток, выполняющий операцию, быть прерван при отмене. Если `mayInterruptIfRunning` равно `true`, то поток может быть прерван.
4. **`isDone()`:** Метод `isDone()` возвращает `true`, если операция завершена и результат доступен для получения с помощью `get()`. В противном случае, если операция все еще выполняется или еще не была запущена, метод вернет `false`.
5. **`isCancelled()`:** Метод `isCancelled()` возвращает `true`, если операция была отменена с помощью `cancel()`. В противном случае метод вернет `false`.

Объект `Future` является результатом выполнения асинхронных операций, таких как параллельные задачи, исполнение потоков, отправка запросов к удаленным ресурсам и другие. Он позволяет получить результат операции в будущем или управлять ее выполнением, включая возможность отмены операции.

### Пример

```java
import java.util.concurrent.*;

public class FutureExample {
    public static void main(String[] args) {
        ExecutorService executor = Executors.newSingleThreadExecutor();

        Future<Integer> future = executor.submit(() -> {
            // Выполняем вычисления
            Thread.sleep(2000);
            return 42;
        });

        System.out.println("Ожидаем получение результата...");

        try {
            int result = future.get(); // Блокирующий вызов, ожидаем получение результата
            System.out.println("Результат: " + result);
        } catch (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        }

        executor.shutdown();
    }
}

```
В этом примере создается `ExecutorService` с использованием `Executors.newSingleThreadExecutor()`. Затем мы передаем задачу в метод `submit()`, который возвращает объект `Future`. Мы ожидаем получение результата с помощью метода `get()`, который блокирует текущий поток до тех пор, пока результат не станет доступным. После получения результата мы выводим его на консоль. Завершаем работу `ExecutorService` с помощью `shutdown()`.

Объект `Future` позволяет управлять асинхронными операциями и получать результаты по мере их завершения. Он является мощным инструментом для работы с параллельными вычислениями и асинхронными операциями в Java.
