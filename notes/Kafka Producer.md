---
tags: Kafka 
---
## Acknowledgement

acks=0 не ждем подтверждения
acks=1 ждем от лидера (чаще всего)
acks=all ждем от всех ( нет потерь 100%)

Семантика Exactly once очень дорогая и влечёт вместе с собой определенные риски. Так например, мы можем получить блокировку при отправке, поскольку данные могут не реплицироваться из‑за упавшей реплики или же уже после обработки сообщения, может произойти непредвиденная ситуация, извещение о доставке не будет получено и случится дубликат. Стремится к ней не стоит.

## Message Key
- Key - часть сообщения, может быть null 
	- Если не nul - то все сообщения с этим ключом пишутся всегда в один partition
	- Если null - то выбирается partition по round robin (по очереди)