---
tags: Java/Многопоточность
---
Объект `FutureTask` в Java является реализацией интерфейса [[Объект Future|Future]] и `Runnable`. Он представляет собой задачу, которую **можно выполнять асинхронно** и получать **результаты в дальнейшем**

>[!tip] FutureTask позволяет создать задачу, а затем получить её результат
>Он также позволяет управлять состоянием задачи, проверять, завершилась ли она, и отменять выполнение задачи.

`FutureTask` позволяет выполнить асинхронные вычисления и получить результаты после их завершения. Он может быть использован вместе с `ExecutorService` для выполнения параллельных задач и получения результатов по мере их готовности.

Некоторые особенности `FutureTask`:

1. Он реализует интерфейс `Runnable`, поэтому может быть выполнен как задача в потоке.
2. Он реализует интерфейс `Future`, поэтому позволяет получить результат выполнения задачи и проверить ее состояние.
3. Он может быть передан в `ExecutorService` для выполнения в пуле потоков.
4. Можно явно вызвать метод `run()` для выполнения задачи в текущем потоке.
5. Поддерживает отмену задачи и проверку ее состояния.
6. Предоставляет методы `get()` для получения результата и `isDone()` для проверки завершения задачи.
### Пример

```java
import java.util.concurrent.*;

public class FutureTaskExample {
    public static void main(String[] args) {
	    // Создаем задачу
        Callable<Integer> task = () -> {
            Thread.sleep(2000);
            return 42;
        };
		//Передаем задачу в объект FutureTask
        FutureTask<Integer> futureTask = new FutureTask<>(task); 
		//Передаем FutureTask в ExecutorService для выполнения задачи в пуле потоков
        ExecutorService executor = Executors.newSingleThreadExecutor();
        executor.execute(futureTask);

        System.out.println("Ожидаем получение результата...");

        try {
	        // Блокирующий вызов, ожидаем получение результата
            int result = futureTask.get(); 
            System.out.println("Результат: " + result);
        } catch (InterruptedException | ExecutionException e) {
            e.printStackTrace();
        }

        executor.shutdown();
    }
}
```

В этом примере создается объект `Callable`, который представляет задачу, выполняющуюся асинхронно и возвращающую результат типа `Integer`. Затем создается объект `FutureTask`, принимающий эту задачу в качестве аргумента. Мы передаем `FutureTask` в `execute()` метод `ExecutorService` для выполнения задачи в пуле потоков.

Мы ожидаем получение результата с помощью метода `get()`, который блокирует текущий поток до тех пор, пока результат не станет доступным. После получения результата мы выводим его на консоль. Завершаем работу `ExecutorService` с помощью `shutdown()`.

`FutureTask` предоставляет мощные возможности для выполнения асинхронных задач и получения результатов. Он может быть полезным инструментом для реализации параллельных вычислений и обработки результатов в Java.
