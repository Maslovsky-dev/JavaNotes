---
tags: Java/ООП
--- 
https://metanit.com/java/tutorial/3.1.php
Кроме обычных методов классы могут определять специальные методы, которые называются **конструкторами**. Конструкторы вызываются при создании нового **объекта** данного **класса** (оператор new). Конструкторы выполняют инициализацию объекта.

Объявление конструктора состоит из
- модификатора доступа 
- имени класса
```java
public class Program{
      
    public static void main(String[] args) {
         // вызов  конструктора без параметров
        Person bob = new Person(); 
        bob.displayInfo();
         // вызов  конструктора с 1 параметром
        Person tom = new Person("Tom"); 
        tom.displayInfo();
         // вызов  конструктора с 2-мя параметрами
        Person sam = new Person("Sam", 25); 
        sam.displayInfo();
    }
}
class Person{
     
    String name;    // имя
    int age;        // возраст
    //конструктор без параметров
    Person()
    {
        name = "Undefined";
        age = 18;
    }
    //конструктор с 1 параметром
    Person(String n)
    {
        name = n;
        age = 18;
    }
    // конструктор с 2-мя параметрами
    Person(String n, int a)
    {
        name = n;
        age = a;
    }
    void displayInfo(){
        System.out.printf("Name: %s \tAge: %d\n", name, age);
    }
}
```
### Конструкторы по умолчанию
Неявно создается конструктор по умолчанию, без параметров. 

Даже если в классе нет конструктора, его экземпляр можно создать при помощи **new**.

### Приватные конструкторы
Приватный конструктор запрещает создание экземпляра класса вне методов самого класса, чтобы гарантировать существование только одного объекта определённого класса, предположим какого-то ресурса, например БД.

**Например**: Паттерн Singleton (Одиночка): объект в программе должен быть один и к нему есть глобальный доступ.

### Конструкторы копирования
_Конструктором копирования (copy constructor)_ называется специальный конструктор, который принимает в качестве аргумента экземпляр того же класса для создания нового объекта на основе переданного.

Такие конструкторы применяются тогда, когда необходимо создать копию сложного объекта, но при этом мы не хотим использовать метод clone().

Например, нужно создать новую учетную запись из существующей, которая должна иметь то же имя, что и старая, но сегодняшнюю дату создания и отсутствие средств. Мы можем сделать это с помощью конструктора копирования

```java
class BankAccount { 
	String name; 
	LocalDateTime opened; 
	double balance; 
	//конструктор копирования
	public BankAccount(BankAccount account) { 
		name = account.name; 
		opened = LocalDateTime.now(); 
		balance = 0.0f; 
	}
```
[[Клонирование]]

В методе `main()`

```java
LocalDateTime opened = LocalDateTime.of(1986, Month.MAY, 30, 4, 30, 0); 
BankAccount account = new BankAccount("Tom", opened, 12_642.0f); 
BankAccount newAccount = new BankAccount(account);
```

## Порядок вызова конструкторов и блоков инициализации с учетом иерархии классов
- Статические блоки от первого до последнего предка (от предка до наследника) 
- Попарно динамический блок инициализации (не статический) и конструктор от первого до последнего предка

**Parent static** block(s) → **Child static** block(s) → **Grandchild static** block(s)
→ **Parent** non-static block(s) → **Parent** constructor → 
→ **Child** non-static block(s) → **Child** constructor →
→ **Grandchild** non-static block(s) → **Grandchild** constructor

>[!NOTE] При создании объекта сначала создаются все его родители!
