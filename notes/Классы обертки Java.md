---
tags: Java/ОсновыЯзыка
--- 
Для того, чтобы иметь возможность оперировать с простыми числами (и boolean) как с объектами (ссылочными типами) были придуманы классы-обёртки.

Классы обертки нужны
1. Для хранения примитивов в коллекции
2. Для использования в дженериках (Generics)
3. Когда нужно выразить в программе факт отсутствия значения (можно хранить Null)
	**Важно использовать [[Класс Optional]] для удобной отработки возможного null значения**

>[!WARNING] 
>Классы-обёртки неизменяемые (Immutable)
>Поэтому при каждой автоупаковке (за исключением значений из pool) создается новый объект, что может привести к неразумному расходу памяти.

**Например**, завернём примитивный int в объект класса Integer. Что при этом происходит в памяти?
Примитивный int – это 4 байта памяти, в которых лежит значение. Ссылочный Integer – это ссылка на объект Integer, лежащий в куче, а внутри этого объекта лежи примитивное значение int.
![[Классы обертки хранение.png]]
## Автоупаковка автораспаковка
Процесс преобразования примитивных типов в эквивалентные объекты (ссылочный тип) называется автоупаковкой (autoboxing), а обратный ему — автораспаковкой (unboxing).

**Автоупаковка/автораспаковка не работает для массивов!**
``` java
int primitive 0;
Integer reference = Integer.valueOf(primitive);
int backToPrimitive = reference.intValue();
```

## Преобразования типов
![[Явные и неявные преобразования типов.png]]
### Явные
Это явное сужение от большего к меньшему.
Необходимо явно указать сужаемый тип.
![[Потеря данных при преобразовании.png]]


В случае с объектами мы можем делать неявное (автоматическое) приведение от наследника к родителю, но не наоборот, иначе получим ClassCastException.
### Неявные (безопасные)
Автоматическое расширение типа переменной от меньшего к большему
Старшие разряды более широкого типа просто заполняются знаковым битом исходного значения.
![[Преобразования типов с потерей точности.png]]
![[Почему происходит потеря точности при приведении типов.png]]
![[Преобразование вещественных чисел в целочисленные.png]]

## Обертки примитивных типов

| Primitive Data Types | Wrapper Classes |
|----------------------|-----------------|
| int                  | **Integer**         |
| short                | Short           |
| long                 | Long            |
| byte                 | Byte            |
| float                | Float           |
| double               | Double          |
| char                 | **Character**       |
| boolean              | Boolean         |

## Вывод
**Примитивы:**
-   имеют преимущество в производительности

**Обертки:**
-   Позволяют не нарушать принцип “все является объектом”, благодаря чему числа, символы и булевы значения true/false не выпадают из этой концепции
-   Расширяют возможности работы с этими значениями, предоставляя удобные методы и поля
-   Необходимы, когда какой-то метод может работать исключительно с объектами
