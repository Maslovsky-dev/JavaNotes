---
tags: Микросервисы
---
Docker Volume (том Docker) - это механизм, который позволяет контейнерам сохранять и обмениваться данными между собой и с хостовой машиной. Он предоставляет более гибкий и надежный способ управления данными контейнеров, чем монтирование директорий хостовой машины.

В случае с базой данных PostgreSQL, использование Docker Volume предоставляет следующие преимущества:

1. **Надежное хранение данных**: Docker Volume позволяет изолировать данные от контейнера. Это обеспечивает надежность и сохранность данных, даже если контейнер был пересоздан или удален.

2. **Гибкая масштабируемость**: Вы можете легко масштабировать свой сервис, используя Docker Volume. Например, вы можете запустить несколько экземпляров контейнеров базы данных, и все они могут использовать один и тот же Docker Volume.

3. **Переносимость**: Docker Volume позволяет легко перемещать данные между различными хостовыми машинами и контейнерами.


Для использования Docker Volume с PostgreSQL:

1. **Создание Volume**: Создайте Docker Volume с помощью команды `docker volume create`:

`docker volume create postgres-data`

2. **Запуск контейнера с использованием Volume**: Запустите контейнер PostgreSQL, монтируя созданный Docker Volume внутрь контейнера:

```bash
docker run -d --name postgres-container -e POSTGRES_PASSWORD=mysecretpassword -p 5432:5432 -v postgres-data:/var/lib/postgresql/data postgres:latest
```
В данном примере, том `postgres-data` будет монтирован внутрь контейнера в директорию `/var/lib/postgresql/data`, где хранятся данные PostgreSQL.

3. **Подключение к базе данных**: Подключайтесь к базе данных так, как обычно делаете, используя хост `localhost` и порт, который вы пробросили (по умолчанию 5432). Данные будут храниться внутри Docker Volume.


Использование Docker Volume упрощает управление данными вашего контейнера PostgreSQL и обеспечивает более надежное хранение данных, особенно в продакшн-среде.

## Где данные docker volume будут храниться на хост машине?
Данные Docker Volume будут храниться в специальном месте на файловой системе хостовой машины, зарезервированном для хранения данных Docker. Местоположение может различаться в зависимости от операционной системы хоста и конфигурации Docker.

Вот как обычно это происходит на разных операционных системах:

1. **Linux**: На большинстве дистрибутивов Linux, данные Docker Volume хранятся в директории `/var/lib/docker/volumes/`. Каждый Docker Volume будет представлять собой отдельную поддиректорию внутри этой директории.

2. **macOS**: На macOS данные Docker Volume на самом деле хранятся в виртуальной машине Linux, которая запускается внутри Docker Desktop. Вы можете получить доступ к этой виртуальной машине через специальные команды или интерфейс Docker Desktop.

3. **Windows**: На Windows, Docker Volume хранятся в виртуальной машине Linux, подобно ситуации на macOS. Docker Desktop на Windows использует виртуальную машину Hyper-V или WSL 2 для запуска контейнеров и хранения данных.


Важно знать, что Docker управляет местоположением и управлением данных Docker Volume, и вам обычно не нужно вмешиваться в работу этой системы хранения. Если вы работаете непосредственно с данными Docker Volume на хостовой машине, обратите внимание на документацию Docker для вашей операционной системы, чтобы получить дополнительную информацию.
