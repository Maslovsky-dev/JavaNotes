---
tags: Java/Многопоточность 
aliases: synchronized
---

Синхронизация в Java - это механизм, который позволяет контролировать доступ к **общим ресурсам в многопоточной среде**. Он гарантирует, что только один поток может одновременно выполнять защищенный код, предотвращая возникновение гонок данных и других проблем, связанных с параллельным доступом.

В Java существуют несколько способов достичь синхронизации:

1. **Ключевое слово `synchronized`**:
    - Синхронизированный блок кода:
```java
synchronized (monitorObject) {
    // Код, защищенный монитором
}
```
- Синхронизированный метод
```java
public synchronized void synchronizedMethod() {
    // Код, защищенный монитором
}
```
Когда поток входит в синхронизированный блок или вызывает синхронизированный метод, он блокирует доступ к монитору объекта и получает эксклюзивное право на выполнение кода, защищенного монитором.

2. **Объекты-мьютексы (Mutex)**:
```java
public class SharedResource {
    private final Object mutex = new Object();

    public void criticalSection() {
        synchronized (mutex) {
            // Критическая секция кода
            // ...
        }
    }
}
```

В этом примере `mutex` представляет собой объект-мьютекс, который используется для синхронизации доступа к критической секции в методе `criticalSection()`. Когда поток заходит в синхронизированный блок кода с помощью ключевого слова `synchronized`, он захватывает мьютекс `mutex`. Другие потоки, пытающиеся получить доступ к той же критической секции, будут блокированы до тех пор, пока мьютекс не будет освобожден текущим потоком.


Объекты-мьютексы предоставляют более гибкие возможности для управления блокировками и синхронизацией в сравнении с [[Ключевое слово synchronized |ключевым словом synchronized]]. Они могут быть использованы для более сложных сценариев синхронизации, например, для установки времени ожидания, попытки блокировки или использования условий.

3. **Синхронизация с помощью [[Volatile]]**:
Ключевое слово `volatile` применяется к переменным и гарантирует, что все потоки будут видеть последнюю записанную версию этой переменной. Оно используется для обеспечения видимости изменений переменной между потоками и предотвращения оптимизаций компилятором или процессором, которые могут привести к неожиданным поведениям при параллельном доступе.

```java
private volatile boolean flag = false;
```

4. **Использование классов из пакета `java.util.concurrent`**:
Java предоставляет набор классов и интерфейсов в пакете `java.util.concurrent`, которые предназначены для обработки многопоточности и синхронизации, таких как `Semaphore`, `CountDownLatch`, `CyclicBarrier`, `BlockingQueue` и другие. Эти классы предлагают более высокоуровневые средства для синхронизации и координации потоков. [[Способы управления потоками java.util.concurrent]]

5. [[Системная синхронизация с использованием wait(), notify(), notifyALll()]]
6. Системная синхронизация с использованием join()

[[Синхронизаторы]]
