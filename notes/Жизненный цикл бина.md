---
tags: Spring
---
[Собеседование Java Spring - Разбор вопросов с собеседований на Java Developer - YouTube](https://youtu.be/_7riaBIOxbM?t=1977)
Beans – центральный объект заботы Spring Framework. За кулисами фреймворка с ними происходит множество процессов. Во многие из них можно вмешаться, добавив собственную логику в разные этапы жизненного цикла. Через следующие этапы проходит каждый _отдельно взятый_ бин:

**1. Инстанцирование объекта**. Техническое начало жизни бина, работа конструктора его класса;
**2. Установка свойств** из конфигурации бина, [внедрение зависимостей](https://itsobes.ru/JavaSobes/kak-spring-framework-realizuet-pattern-dependency-injection);
Если бин зависит от других бинов, Spring также осуществляет внедрение зависимостей, что означает предоставление необходимых зависимостей (объектов) бину.

**3. Нотификация aware-интерфейсов**. `BeanNameAware`, `BeanFactoryAware` и другие. [[Aware интерфейсы]] Технически, выполняется системными подтипами `BeanPostProcessor`, и совпадает с шагом 4; Например, `BeanNameAware` позволяет бину получить свое собственное имя в контексте. Этот этап тесно связан с шагом 4 и выполняется через `BeanPostProcessor`.

**4. Пре-инициализация**– метод `postProcessBeforeInitialization()` интерфейса `BeanPostProcessor` позволяет вам внести какие-либо изменения или дополнительные настройки перед фактической инициализацией бина.

**5. Инициализация.** Разные способы применяются в таком порядке:
**-** Метод бина с аннотацией `@PostConstruct` из стандарта JSR-250 (рекомендуемый способ);
	Вы можете определить, какие конкретные действия должны быть выполнены после полной инициализации бина. Например, это может включать в себя настройку ресурсов, установку значений по умолчанию или подготовку состояния бина для работы.
- [ ] над методом
**-** Метод `afterPropertiesSet()` бина под интерфейсом `InitializingBean`;
**-** Init-метод. Для отдельного бина его имя устанавливается в параметре определения `initMethod`. В xml-конфигурации можно установить для всех бинов сразу, с помощью `default-init-method`;
- [ ] Где?

**6. Пост-инициализация**– метод `postProcessAfterInitialization()` интерфейса `BeanPostProcessor`. Этот метод позволяет вам внести изменения в бин после его инициализации, если это необходимо.

Когда IoC-контейнер завершает свою работу, мы можем кастомизировать этап штатного уничтожения бина. Как со всеми способами [финализации](https://itsobes.ru/JavaSobes/finalize) в Java, при жестком выключении (`kill -9`) гарантии вызова этого этапа нет. Три альтернативных способа «деинициализации» вызываются в том же порядке, что симметричные им методы инициализации:

**1.** Метод с аннотацией `@PreDestroy`;
**2.** Метод с именем, которое указано в свойстве `destroyMethod` определния бина (или в глобальном `default-destroy-method`);
**3.** Метод `destroy()` интерфейса `DisposableBean`.

Не следует путать жизненный цикл отдельного бина с жизненным циклом контекста и этапами подготовки фабрик бинов. О них мы поговорим в будущих публикациях.
![[Жизненный цикл бина Spring.png]]
![[Жизненный цикл бина 2.png]]

![[Методы init и destroy.png]]

- [ ] Доработать
